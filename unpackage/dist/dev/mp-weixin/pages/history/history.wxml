<view class="container"><view class="page-header"><text class="page-title">评估历史记录</text><text class="page-subtitle">查看过往的评估记录和发育趋势</text></view><block wx:if="{{$root.g0>0}}"><view class="stats-container"><view class="stat-item"><text class="stat-number">{{$root.g1}}</text><text class="stat-label">总评估次数</text></view><view class="stat-item"><text class="stat-number">{{latestScore}}</text><text class="stat-label">最新得分</text></view><view class="stat-item"><text class="stat-number">{{averageScore}}</text><text class="stat-label">平均得分</text></view></view></block><block wx:if="{{$root.g2>0}}"><view class="history-container"><block wx:for="{{$root.l0}}" wx:for-item="record" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['viewRecord',['$0'],[[['assessmentHistory','',index]]]]]]]}}" class="history-item" bindtap="__e"><view class="record-header"><view class="record-info"><text class="child-name">{{record.$orig.childInfo.name}}</text><text class="record-date">{{record.m0}}</text></view><view class="{{record.m1}}"><text class="score-text">{{record.$orig.scorePercent+"分"}}</text></view></view><view class="record-details"><view class="detail-row"><text class="detail-label">年龄：</text><text class="detail-value">{{record.m2}}</text></view><view class="detail-row"><text class="detail-label">评估等级：</text><text class="{{record.m3}}">{{''+record.m4+''}}</text></view></view><view class="record-footer"><text class="view-text">点击查看详情 →</text></view></view></block></view></block><block wx:else><view class="empty-state"><view class="empty-icon"><text class="icon-text">📋</text></view><text class="empty-title">暂无评估记录</text><text class="empty-desc">开始第一次评估，记录孩子的成长历程</text><button data-event-opts="{{[['tap',[['startAssessment',['$event']]]]]}}" class="start-button" bindtap="__e"><text class="button-text">开始评估</text></button></view></block><block wx:if="{{$root.g3>1}}"><view class="trend-section"><view class="section-title"><text class="title-text">发育趋势</text></view><view class="trend-chart"><view class="chart-container"><block wx:for="{{$root.l1}}" wx:for-item="record" wx:for-index="index" wx:key="index"><view class="trend-point" style="{{'left:'+(index/(record.g4-1)*100+'%')+';'+('bottom:'+(record.$orig.scorePercent/100*200+'rpx')+';')}}"><view class="{{record.m5}}"></view><text class="point-score">{{record.$orig.scorePercent}}</text></view></block><view class="trend-line"></view></view><view class="chart-labels"><text class="label-text">最早</text><text class="label-text">最新</text></view></view></view></block><block wx:if="{{$root.g5>0}}"><view class="action-container"><button data-event-opts="{{[['tap',[['clearHistory',['$event']]]]]}}" class="action-button secondary" bindtap="__e"><text class="button-text">清空记录</text></button><button data-event-opts="{{[['tap',[['startAssessment',['$event']]]]]}}" class="action-button primary" bindtap="__e"><text class="button-text">新的评估</text></button></view></block></view>