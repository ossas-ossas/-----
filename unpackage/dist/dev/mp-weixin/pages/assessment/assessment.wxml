<view class="container"><view class="progress-container"><view class="progress-bar"><view class="progress-fill" style="{{'width:'+(progressPercent+'%')+';'}}"></view></view><text class="progress-text">{{currentQuestionIndex+1+" / "+totalQuestions}}</text></view><block wx:if="{{currentQuestion}}"><view class="question-card"><view class="question-header"><text class="question-title">{{currentQuestion.title}}</text><text class="question-category">{{currentQuestion.category}}</text></view><block wx:if="{{currentQuestion.description}}"><view class="question-description"><text class="description-text">{{currentQuestion.description}}</text></view></block><view class="options-container"><block wx:for="{{currentQuestion.options}}" wx:for-item="option" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['selectOption',['$0'],[[['currentQuestion.options','',index,'value']]]]]]]}}" class="{{['option-item',(selectedAnswer===option.value)?'active':'',(isSubmitting)?'disabled':'']}}" bindtap="__e"><view class="option-icon"><text class="icon-text">{{option.icon}}</text></view><view class="option-content"><text class="option-text">{{option.text}}</text><block wx:if="{{option.score!==undefined}}"><text class="option-score">{{"得分："+option.score}}</text></block></view><block wx:if="{{selectedAnswer===option.value}}"><view class="option-check"><text class="check-icon">✓</text></view></block></view></block></view></view></block><view class="button-container"><button class="prev-button" disabled="{{currentQuestionIndex===0||isSubmitting}}" data-event-opts="{{[['tap',[['previousQuestion',['$event']]]]]}}" bindtap="__e"><text class="button-text">上一题</text></button><button class="next-button" disabled="{{!selectedAnswer||isSubmitting}}" data-event-opts="{{[['tap',[['nextQuestion',['$event']]]]]}}" bindtap="__e"><text class="button-text">{{''+(currentQuestionIndex===totalQuestions-1?'完成评估':'下一题')+''}}</text></button></view><block wx:if="{{isSubmitting}}"><view class="loading-mask"><view class="loading-content"><view class="loading-spinner"></view><text class="loading-text">正在生成报告...</text></view></view></block></view>