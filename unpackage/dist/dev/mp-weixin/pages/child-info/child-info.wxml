<view class="container"><view class="page-header"><text class="page-title">儿童基本信息</text><text class="page-subtitle">请填写孩子的详细信息，以便进行准确的发育评估</text></view><view class="form-container"><view class="form-section"><view class="section-title"><text class="title-text">基本信息</text></view><view class="form-item"><text class="label">姓名</text><input class="input" placeholder="请输入孩子姓名" placeholder-style="color: #BDC3C7" data-event-opts="{{[['input',[['__set_model',['$0','name','$event',[]],['formData']]]]]}}" value="{{formData.name}}" bindinput="__e"/></view><view class="form-item"><text class="label">性别</text><view class="radio-group"><view data-event-opts="{{[['tap',[['selectGender',['male']]]]]}}" class="{{['radio-item',(formData.gender==='male')?'active':'']}}" bindtap="__e"><text class="radio-text">男</text></view><view data-event-opts="{{[['tap',[['selectGender',['female']]]]]}}" class="{{['radio-item',(formData.gender==='female')?'active':'']}}" bindtap="__e"><text class="radio-text">女</text></view></view></view><view class="form-item"><text class="label">出生日期</text><picker mode="date" value="{{formData.birthDate}}" end="{{today}}" data-event-opts="{{[['change',[['onBirthDateChange',['$event']]]]]}}" bindchange="__e"><view class="picker-view"><text class="{{['picker-text',(!formData.birthDate)?'placeholder':'']}}">{{''+(formData.birthDate?formData.birthDate:'请选择出生日期')+''}}</text><text class="picker-icon">📅</text></view></picker></view><block wx:if="{{formData.birthDate}}"><view class="age-display"><text class="age-text">{{"年龄："+calculatedAge}}</text><text class="age-range-text">{{"评估范围："+ageRangeText}}</text></view></block></view><view class="form-section"><view class="section-title"><text class="title-text">家庭信息</text></view><view class="form-item"><text class="label">主要照顾者</text><view class="radio-group"><view data-event-opts="{{[['tap',[['selectCaregiver',['mother']]]]]}}" class="{{['radio-item',(formData.caregiver==='mother')?'active':'']}}" bindtap="__e"><text class="radio-text">母亲</text></view><view data-event-opts="{{[['tap',[['selectCaregiver',['father']]]]]}}" class="{{['radio-item',(formData.caregiver==='father')?'active':'']}}" bindtap="__e"><text class="radio-text">父亲</text></view><view data-event-opts="{{[['tap',[['selectCaregiver',['grandparent']]]]]}}" class="{{['radio-item',(formData.caregiver==='grandparent')?'active':'']}}" bindtap="__e"><text class="radio-text">祖父母</text></view><view data-event-opts="{{[['tap',[['selectCaregiver',['other']]]]]}}" class="{{['radio-item',(formData.caregiver==='other')?'active':'']}}" bindtap="__e"><text class="radio-text">其他</text></view></view></view><view class="form-item"><text class="label">联系电话</text><input class="input" placeholder="请输入联系电话" placeholder-style="color: #BDC3C7" type="number" data-event-opts="{{[['input',[['__set_model',['$0','phone','$event',[]],['formData']]]]]}}" value="{{formData.phone}}" bindinput="__e"/></view></view><view class="form-section"><view class="section-title"><text class="title-text">临床与行为信息</text></view><view class="form-item"><text class="label">医疗诊断</text><view class="checkbox-group"><view data-event-opts="{{[['tap',[['toggleDiagnosis',['cerebralPalsy']]]]]}}" class="{{['checkbox-item',($root.g0)?'active':'']}}" bindtap="__e"><text class="checkbox-text">脑瘫</text></view><view data-event-opts="{{[['tap',[['toggleDiagnosis',['devDelay']]]]]}}" class="{{['checkbox-item',($root.g1)?'active':'']}}" bindtap="__e"><text class="checkbox-text">发育迟缓</text></view><view data-event-opts="{{[['tap',[['toggleDiagnosis',['autism']]]]]}}" class="{{['checkbox-item',($root.g2)?'active':'']}}" bindtap="__e"><text class="checkbox-text">孤独症</text></view><view data-event-opts="{{[['tap',[['toggleDiagnosis',['rare']]]]]}}" class="{{['checkbox-item',($root.g3)?'active':'']}}" bindtap="__e"><text class="checkbox-text">罕见疾病</text></view></view></view><view class="form-item"><text class="label">行走时间</text><view class="radio-group"><view data-event-opts="{{[['tap',[['pickWalkingTime',['before18m']]]]]}}" class="{{['radio-item',(clinical.walkingTime==='before18m')?'active':'']}}" bindtap="__e"><text class="radio-text">1岁半以前</text></view><view data-event-opts="{{[['tap',[['pickWalkingTime',['after18m']]]]]}}" class="{{['radio-item',(clinical.walkingTime==='after18m')?'active':'']}}" bindtap="__e"><text class="radio-text">1岁半以后</text></view><view data-event-opts="{{[['tap',[['pickWalkingTime',['notyet']]]]]}}" class="{{['radio-item',(clinical.walkingTime==='notyet')?'active':'']}}" bindtap="__e"><text class="radio-text">目前还不会行走</text></view></view></view><view class="form-item"><text class="label">爬行情况</text><view class="radio-group column"><view data-event-opts="{{[['tap',[['pickCrawlStatus',['months']]]]]}}" class="{{['radio-item',(clinical.crawlStatus==='months')?'active':'']}}" bindtap="__e"><text class="radio-text">{{"会爬行（"+(clinical.crawlMonths?clinical.crawlMonths:'___')+"个月）"}}</text></view><block wx:if="{{clinical.crawlStatus==='months'}}"><view class="input-row"><input class="number-input" placeholder="月份" placeholder-style="color: #BDC3C7" type="number" data-event-opts="{{[['input',[['__set_model',['$0','crawlMonths','$event',[]],['clinical']]]]]}}" value="{{clinical.crawlMonths}}" bindinput="__e"/></view></block><view data-event-opts="{{[['tap',[['pickCrawlStatus',['nocrawl']]]]]}}" class="{{['radio-item',(clinical.crawlStatus==='nocrawl')?'active':'']}}" bindtap="__e"><text class="radio-text">不会爬行</text></view><view data-event-opts="{{[['tap',[['pickCrawlStatus',['walkThenCrawl']]]]]}}" class="{{['radio-item',(clinical.crawlStatus==='walkThenCrawl')?'active':'']}}" bindtap="__e"><text class="radio-text">先行走后再会爬行</text></view></view></view><view class="form-item"><text class="label">跪走情况</text><view class="radio-group"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="{{['radio-item',(clinical.kneelWalk===true)?'active':'']}}" bindtap="__e"><text class="radio-text">会跪走</text></view><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="{{['radio-item',(clinical.kneelWalk===false)?'active':'']}}" bindtap="__e"><text class="radio-text">目前不会跪走</text></view></view></view><view class="form-item"><text class="label">惯用手</text><view class="radio-group"><view data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="{{['radio-item',(clinical.handedness==='left')?'active':'']}}" bindtap="__e"><text class="radio-text">左手</text></view><view data-event-opts="{{[['tap',[['e3',['$event']]]]]}}" class="{{['radio-item',(clinical.handedness==='right')?'active':'']}}" bindtap="__e"><text class="radio-text">右手</text></view></view></view><view class="form-item"><text class="label">视觉障碍</text><view class="radio-group column"><view data-event-opts="{{[['tap',[['pickVision',['normal']]]]]}}" class="{{['radio-item',(clinical.vision.status==='normal')?'active':'']}}" bindtap="__e"><text class="radio-text">常态</text></view><view data-event-opts="{{[['tap',[['pickVision',['amblyopia']]]]]}}" class="{{['radio-item',(clinical.vision.status==='amblyopia')?'active':'']}}" bindtap="__e"><text class="radio-text">弱视</text></view><block wx:if="{{clinical.vision.status==='amblyopia'}}"><view class="checkbox-sub-group"><view data-event-opts="{{[['tap',[['pickVisionSub',['myopia']]]]]}}" class="{{['checkbox-sub-item',($root.g4)?'active':'']}}" bindtap="__e"><text class="checkbox-text">近视</text></view><view data-event-opts="{{[['tap',[['pickVisionSub',['astigmatism']]]]]}}" class="{{['checkbox-sub-item',($root.g5)?'active':'']}}" bindtap="__e"><text class="checkbox-text">散光</text></view></view></block><view data-event-opts="{{[['tap',[['pickVision',['strabismus']]]]]}}" class="{{['radio-item',(clinical.vision.status==='strabismus')?'active':'']}}" bindtap="__e"><text class="radio-text">斜视</text></view></view></view><view class="form-item"><text class="label">听觉障碍</text><view class="radio-group column"><view data-event-opts="{{[['tap',[['pickHearing',['normal']]]]]}}" class="{{['radio-item',(clinical.hearing.status==='normal')?'active':'']}}" bindtap="__e"><text class="radio-text">常态</text></view><view data-event-opts="{{[['tap',[['pickHearing',['impaired']]]]]}}" class="{{['radio-item',(clinical.hearing.status==='impaired')?'active':'']}}" bindtap="__e"><text class="radio-text">听障</text></view><block wx:if="{{clinical.hearing.status==='impaired'}}"><view class="inline"><text class="label-inline">左耳</text><input class="number-input" placeholder="dB" placeholder-style="color: #BDC3C7" type="number" data-event-opts="{{[['input',[['__set_model',['$0','dbLeft','$event',[]],['clinical.hearing']]]]]}}" value="{{clinical.hearing.dbLeft}}" bindinput="__e"/><text class="label-inline">右耳</text><input class="number-input" placeholder="dB" placeholder-style="color: #BDC3C7" type="number" data-event-opts="{{[['input',[['__set_model',['$0','dbRight','$event',[]],['clinical.hearing']]]]]}}" value="{{clinical.hearing.dbRight}}" bindinput="__e"/></view></block></view></view><view class="form-item"><text class="label">癫痫症</text><view class="radio-group column"><view data-event-opts="{{[['tap',[['e4',['$event']]]]]}}" class="{{['radio-item',(clinical.epilepsy==='none')?'active':'']}}" bindtap="__e"><text class="radio-text">无</text></view><view data-event-opts="{{[['tap',[['e5',['$event']]]]]}}" class="{{['radio-item',(clinical.epilepsy==='medicated')?'active':'']}}" bindtap="__e"><text class="radio-text">有（服药中）</text></view><view data-event-opts="{{[['tap',[['e6',['$event']]]]]}}" class="{{['radio-item',(clinical.epilepsy==='unmedicated')?'active':'']}}" bindtap="__e"><text class="radio-text">有（未服药）</text></view></view></view><view class="form-item"><text class="label">提供视频</text><text class="sub-note">生活中，关于孩子衣食住行，吃喝玩乐，喜怒哀乐、行走活动及运动等各方面视频（最多6个）</text><view class="video-list"><block wx:for="{{clinical.videos}}" wx:for-item="video" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['removeVideo',[index]]]]]}}" class="video-item" bindtap="__e"><text>{{"视频"+(index+1)}}</text></view></block><block wx:if="{{$root.g6<6}}"><view data-event-opts="{{[['tap',[['chooseVideo',['$event']]]]]}}" class="video-item" bindtap="__e"><text>+ 添加视频</text></view></block></view></view><view class="form-item"><text class="label">后续居家辅导</text><view class="radio-group"><view data-event-opts="{{[['tap',[['e7',['$event']]]]]}}" class="{{['radio-item',(clinical.homeGuide===true)?'active':'']}}" bindtap="__e"><text class="radio-text">需要</text></view><view data-event-opts="{{[['tap',[['e8',['$event']]]]]}}" class="{{['radio-item',(clinical.homeGuide===false)?'active':'']}}" bindtap="__e"><text class="radio-text">不需要</text></view></view></view></view><view class="form-section"><view class="section-title"><text class="title-text">备注信息</text></view><view class="form-item"><text class="label">其他需要说明的情况</text><textarea class="textarea" placeholder="如有其他需要说明的情况，请在此填写" placeholder-style="color: #BDC3C7" maxlength="200" data-event-opts="{{[['input',[['__set_model',['$0','notes','$event',[]],['formData']]]]]}}" value="{{formData.notes}}" bindinput="__e"></textarea><text class="char-count">{{$root.g7+"/200"}}</text></view></view></view><view class="button-container"><button class="next-button" disabled="{{!isFormValid}}" data-event-opts="{{[['tap',[['goToAssessment',['$event']]]]]}}" bindtap="__e"><text class="button-text">开始评估</text></button></view></view>