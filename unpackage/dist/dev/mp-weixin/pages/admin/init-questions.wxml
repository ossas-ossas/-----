<view class="container"><view class="header"><text class="title">初始化题目数据</text><text class="subtitle">将题目数据导入到数据库</text></view><view class="content"><view class="info-card"><text class="info-title">题目数据信息</text><view class="info-item"><text class="info-label">题目总数：</text><text class="info-value">{{questionsCount}}</text></view><view class="info-item"><text class="info-label">状态：</text><text class="{{['info-value',statusClass]}}">{{statusText}}</text></view></view><block wx:if="{{result}}"><view class="result-card"><text class="result-title">初始化结果</text><view class="result-content"><text class="result-text">{{result.msg}}</text><block wx:if="{{result.total}}"><view class="result-stats"><text class="stat-item">{{"总数："+result.total}}</text><text class="stat-item">{{"已存在："+(result.existing||0)}}</text><text class="stat-item">{{"新插入："+(result.inserted||0)}}</text><block wx:if="{{result.failed>0}}"><text class="stat-item" style="color:#E74C3C;">{{"失败："+result.failed}}</text></block></view></block><block wx:if="{{result.failed>0}}"><view class="result-warning"><text class="warning-text">⚠️ 部分题目插入失败，请检查控制台日志或重新运行初始化</text></view></block><block wx:if="{{result.success&&result.failed===0&&result.inserted+result.existing===result.total}}"><view class="result-success"><text class="success-text">✅ 所有题目已成功初始化！</text></view></block></view></view></block><view class="button-group"><button class="init-button" disabled="{{isInitializing}}" data-event-opts="{{[['tap',[['initQuestions',['$event']]]]]}}" bindtap="__e"><text>{{isInitializing?'初始化中...':'开始初始化'}}</text></button><button class="clean-button" disabled="{{isCleaning}}" data-event-opts="{{[['tap',[['cleanDuplicates',['$event']]]]]}}" bindtap="__e"><text>{{isCleaning?'清理中...':'清理重复题目'}}</text></button><button class="diagnose-button" disabled="{{isDiagnosing}}" data-event-opts="{{[['tap',[['diagnoseQuestions',['$event']]]]]}}" bindtap="__e"><text>{{isDiagnosing?'诊断中...':'诊断题目数据'}}</text></button><button class="clear-button" disabled="{{isClearing}}" data-event-opts="{{[['tap',[['clearAllQuestions',['$event']]]]]}}" bindtap="__e"><text>{{isClearing?'清空中...':'清空所有题目（危险）'}}</text></button></view><view class="tips"><text class="tips-title">注意事项：</text><text class="tips-item">1. 初始化过程可能需要几分钟，请耐心等待</text><text class="tips-item">2. 已存在的题目不会重复插入</text><text class="tips-item">3. 初始化完成后，可以正常使用评估功能</text></view></view></view>