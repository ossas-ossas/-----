{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/86182/Documents/HBuilderProjects/前端小程序/pages/result/result.vue?4596","webpack:///C:/Users/86182/Documents/HBuilderProjects/前端小程序/pages/result/result.vue?ce4e","webpack:///C:/Users/86182/Documents/HBuilderProjects/前端小程序/pages/result/result.vue?9215","webpack:///C:/Users/86182/Documents/HBuilderProjects/前端小程序/pages/result/result.vue?1b1c","uni-app:///pages/result/result.vue","webpack:///C:/Users/86182/Documents/HBuilderProjects/前端小程序/pages/result/result.vue?be74","webpack:///C:/Users/86182/Documents/HBuilderProjects/前端小程序/pages/result/result.vue?7507"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","role","childInfo","name","ageBand","gender","summary","overallScore","level","domains","notAchieved","onLoad","console","uni","title","content","showCancel","confirmText","success","url","methods","loadFromLocal","icon","setTimeout","loadFromCloudData","Object","ratio","subdomains","domain","subdomain","passed","total","calculateSummary","domainQuestions","subStats","totalPassed","totalQuestions","getSubdomainLabel","getBarColorClass","getLevelText","goToUserCenter","startNew","loadFromCloudForParent","uniCloud","assessmentId","loadFromCloudForTeacher"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,eAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACqC;;;AAG1F;AAC0M;AAC1M,gBAAgB,iNAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvCA;AAAA;AAAA;AAAA;AAAsyB,CAAgB,oyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiF1zB;AACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AACA;AAAA,eAEA;EACAC;IACA;MACAC;MAAA;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;QACAC;QACAC;QACAC;MACA;;MACAC;IACA;EACA;EACAC;IACAC;;IAEA;IACA;IACA;MACAA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;UACAL;YACAM;UACA;QACA;MACA;MACA;IACA;;IAEA;IACA;IACA;MACAP;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;UACAL;YACAM;UACA;QACA;MACA;MACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;EACA;EACAC;IACA;IACAC;MAAA;MACA;MACAT;MACAA;;MAEA;MACA;QACAA;QACAC;UACAC;UACAQ;QACA;QACAC;UACAV;QACA;QACA;MACA;;MAEA;MACA;QACAV;QACAC;QACAC;MACA;;MAEA;MACA;QACAO;QACA;MACA;QACA;QACAA;QACA;MACA;;MAEA;MACA;IACA;IAEA;IACAY;MAAA;MACA;MAEAZ;MACAA;MACAA;MACAA;;MAEA;MACA;MACAA;;MAEA;MACA;;MAEA;MACA;QACAa;UACA;UACAb;UAEAH;YACAiB;YACAC;UACA;QACA;MACA;;MAEA;MACA;QACAF;UACA;UACA;UACA;YACAb;YACA;UACA;UAEA;YAAAgB;YAAAC;UACA;;UAEA;UACA;YACAjB;YACAH;cACAiB;cACAC;YACA;UACA;UAEAlB;YACAqB;YACAC;YACAL;UACA;QACA;MACA;MAEA;QACAnB;QACAC;QACAC;MACA;MAEAG;MACAA;MACAA;MACAA;MACAA;;MAEA;MACAa;QACA;QACAb;MACA;IACA;IAEA;IACAoB;MACA;MACA;MACA;MAEApB;MACAA;MACAA;MAEA;MACA;MACA;;MAEA;MACAa;QACA;QACA;UAAA;QAAA;QACA;QACA;;QAEA;QACA;QACAQ;UACA;UACA;YACAN;cAAAI;cAAAD;YAAA;UACA;UACAH;UACA;UACA;YACAA;UACA;QACA;;QAEA;QACAF;UACA;UACAS;QACA;QAEAzB;UACAiB;UACAC;QACA;QAEAQ;QACAC;MACA;MAEA;MAEA;QACA7B;QACAC;QACAC;MACA;MAEAG;MACAA;IACA;IAEA;IACAyB;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA3B;QACAM;MACA;IACA;IAEA;IACAsB;MACA5B;QACAC;QACAC;QACAG;UACA;YACA;YACAL;YACAA;;YAEA;YACAA;cACAM;YACA;UACA;QACA;MACA;IACA;IAEA;IACAuB;MAAA;MACA;MACAC;QACAxC;QACAH;UAAA4C;QAAA;MACA;QACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACAF;QACAxC;QACAH;UAAA4C;QAAA;MACA;QACAnB;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACjaA;AAAA;AAAA;AAAA;AAA+pC,CAAgB,ynCAAG,EAAC,C;;;;;;;;;;;ACAnrC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/result/result.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/result/result.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./result.vue?vue&type=template&id=8b0659b4&scoped=true&\"\nvar renderjs\nimport script from \"./result.vue?vue&type=script&lang=js&\"\nexport * from \"./result.vue?vue&type=script&lang=js&\"\nimport style0 from \"./result.vue?vue&type=style&index=0&id=8b0659b4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8b0659b4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/result/result.vue\"\nexport default component.exports","export * from \"-!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./result.vue?vue&type=template&id=8b0659b4&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l1 = _vm.__map(_vm.summary.domains, function (domainData, domain) {\n    var $orig = _vm.__get_orig(domainData)\n    var g0 = Math.round(domainData.ratio * 100)\n    var l0 = domainData.subdomains\n      ? _vm.__map(domainData.subdomains, function (subData, subdomain) {\n          var $orig = _vm.__get_orig(subData)\n          var m0 = _vm.getSubdomainLabel(subdomain)\n          var g1 = Math.round(subData.ratio * 100)\n          return {\n            $orig: $orig,\n            m0: m0,\n            g1: g1,\n          }\n        })\n      : null\n    return {\n      $orig: $orig,\n      g0: g0,\n      l0: l0,\n    }\n  })\n  var g2 = _vm.role === \"teacher\" ? _vm.notAchieved.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l1: l1,\n        g2: g2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./result.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./result.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"result-container\">\n\t\t<!-- 1️⃣ 报告头部 -->\n\t\t<view class=\"header\">\n\t\t\t<image src=\"/static/logo.png\" class=\"logo\" mode=\"aspectFit\" />\n\t\t<view class=\"child-info\">\n\t\t\t<text class=\"name\">{{ childInfo.name || '未填写' }}</text>\n\t\t\t<text class=\"meta\">{{ childInfo.ageBand || '' }}</text>\n\t\t</view>\n\t\t<view class=\"score-box\">\n\t\t\t<text class=\"score\">{{ summary.overallScore }}%</text>\n\t\t\t<text class=\"level\">{{ summary.level }}</text>\n\t\t</view>\n\t\t</view>\n\n\t\t<!-- 2️⃣ 柱状图 -->\n\t\t<view class=\"chart-section\">\n\t\t\t<text class=\"section-title\">各领域发育完成率</text>\n\t\t\t\n\t\t\t<!-- 各领域汇总柱状图 -->\n\t\t\t<view class=\"domain-overview\" v-for=\"(domainData, domain) in summary.domains\" :key=\"domain\">\n\t\t\t\t<text class=\"domain-title\">{{ domain }}</text>\n\t\t\t\t<text class=\"domain-score\">{{ Math.round(domainData.ratio * 100) }}%</text>\n\t\t\t\t\n\t\t\t\t<!-- 子领域详细柱状图 -->\n\t\t\t\t<view class=\"chart\" v-if=\"domainData.subdomains\">\n\t\t\t\t\t<view class=\"chart-bars\">\n\t\t\t\t\t\t<view \n\t\t\t\t\t\t\tclass=\"chart-bar\" \n\t\t\t\t\t\t\tv-for=\"(subData, subdomain) in domainData.subdomains\" \n\t\t\t\t\t\t\t:key=\"subdomain\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<view class=\"bar-container\">\n\t\t\t\t\t\t\t<view \n\t\t\t\t\t\t\t\tclass=\"bar-fill\" \n\t\t\t\t\t\t\t\t:style=\"{ height: (subData.ratio * 280) + 'rpx' }\"\n\t\t\t\t\t\t\t\t:class=\"subData.ratio >= 0.8 ? 'bar-excellent' : (subData.ratio >= 0.6 ? 'bar-good' : (subData.ratio >= 0.4 ? 'bar-fair' : 'bar-poor'))\"\n\t\t\t\t\t\t\t></view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<text class=\"bar-label\">{{ getSubdomainLabel(subdomain) }}</text>\n\t\t\t\t\t\t\t<text class=\"bar-value\">{{ Math.round(subData.ratio * 100) }}%</text>\n\t\t\t\t\t\t\t<text class=\"bar-count\">{{ subData.passed }}/{{ subData.total }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 3️⃣ 未达标明细（仅教师可见） -->\n\t\t<view v-if=\"role === 'teacher'\" class=\"table-section\">\n\t\t\t<text class=\"section-title\">未达标项目</text>\n\t\t\t<view v-if=\"notAchieved.length > 0\">\n\t\t\t\t<view class=\"table-header\">\n\t\t\t\t\t<text class=\"col-domain\">领域</text>\n\t\t\t\t\t<text class=\"col-title\">项目</text>\n\t\t\t\t\t<text class=\"col-age\">年龄段</text>\n\t\t\t\t</view>\n\t\t\t\t<view \n\t\t\t\t\tv-for=\"(item, index) in notAchieved\" \n\t\t\t\t\t:key=\"index\" \n\t\t\t\t\tclass=\"table-row\"\n\t\t\t\t>\n\t\t\t\t\t<text class=\"col-domain\">{{ item.domain }}</text>\n\t\t\t\t\t<text class=\"col-title\">{{ item.title }}</text>\n\t\t\t\t\t<text class=\"col-age\">{{ item.ageBand }}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view v-else class=\"empty-state\">\n\t\t\t\t<text class=\"empty-text\">所有项目均已达标</text>\n\t\t\t</view>\n\t\t</view>\n\n\t<!-- 4️⃣ 操作按钮 -->\n\t<view class=\"footer-buttons\">\n\t\t<button class=\"btn secondary\" @click=\"goToUserCenter\">个人中心</button>\n\t\t<button class=\"btn primary\" @click=\"startNew\">重新评估</button>\n\t</view>\n\t</view>\n</template>\n\n<script>\n// 子领域标签映射\nconst subdomainLabels = {\n\t'OSV': '视知觉',\n\t'OSH': '听知觉',\n\t'OST': '触知觉',\n\t'ISP': '本体运动知觉',\n\t'ISV': '前庭平衡知觉',\n\t'GM': '躯肢体粗大动作',\n\t'UEM': '双上肢粗大动作',\n\t'FM': '精细动作',\n\t'SIP': '社会互动',\n\t'SIE': '社会情绪',\n\t'COG': '认知',\n\t'LANG': '语言',\n\t'OM': '口腔动作'\n}\n\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\trole: 'parent', // 'parent' 或 'teacher' - 用于控制界面显示\n\t\t\t\tchildInfo: {\n\t\t\t\t\tname: '',\n\t\t\t\t\tageBand: '',\n\t\t\t\t\tgender: ''\n\t\t\t\t},\n\t\t\t\tsummary: {\n\t\t\t\t\toverallScore: 0,\n\t\t\t\t\tlevel: '',\n\t\t\t\t\tdomains: {} // { '认知': { ratio: 0.8 }, '语言': { ratio: 0.65 }, ... }\n\t\t\t\t},\n\t\t\t\tnotAchieved: [] // [{domain, title, ageBand}] - 仅教师端可见\n\t\t\t}\n\t\t},\n\tonLoad(options) {\n\t\tconsole.log('[result] 页面加载')\n\t\t\n\t\t// ✅ 登录守卫：检查登录状态\n\t\tconst token = uni.getStorageSync('uni_id_token')\n\t\tif (!token) {\n\t\t\tconsole.warn('[result] 未登录，跳转到登录页')\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '需要登录',\n\t\t\t\tcontent: '请先登录后查看评估结果',\n\t\t\t\tshowCancel: false,\n\t\t\t\tconfirmText: '去登录',\n\t\t\t\tsuccess: () => {\n\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\turl: '/uni_modules/uni-id-pages/pages/login/login-withpwd'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\t\n\t\t// ✅ 数据验证：检查是否有评估结果\n\t\tconst result = uni.getStorageSync('assessmentResult')\n\t\tif (!result) {\n\t\t\tconsole.warn('[result] 未找到评估结果')\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '未找到评估结果',\n\t\t\t\tcontent: '没有找到评估数据，请重新进行评估',\n\t\t\t\tshowCancel: false,\n\t\t\t\tconfirmText: '返回首页',\n\t\t\t\tsuccess: () => {\n\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\turl: '/pages/index/index'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\t\n\t\t// TODO: 后续对接云函数\n\t\t// if (options.id) {\n\t\t//   this.loadFromCloud(options.id)\n\t\t// } else {\n\t\t//   this.loadFromLocal()\n\t\t// }\n\t\t\n\t\t// 临时：从本地存储加载\n\t\tthis.loadFromLocal()\n\t},\n\tmethods: {\n// 从本地存储加载数据\nloadFromLocal() {\n\tconst result = uni.getStorageSync('assessmentResult')\n\tconsole.log('=== 加载评估结果 ===')\n\tconsole.log('评估结果:', result)\n\t\n\t// 这里已经在 onLoad 中检查过了，但保留防御性检查\n\tif (!result) {\n\t\tconsole.warn('[result] loadFromLocal: 未找到评估结果')\n\t\tuni.showToast({\n\t\t\ttitle: '未找到评估结果',\n\t\t\ticon: 'none'\n\t\t})\n\t\tsetTimeout(() => {\n\t\t\tuni.navigateBack()\n\t\t}, 1500)\n\t\treturn\n\t}\n\t\t\n\t\t// 设置基本信息\n\t\tthis.childInfo = {\n\t\t\tname: result.childInfo?.name || result.childName || '',\n\t\t\tageBand: result.childInfo?.ageBand || '',\n\t\t\tgender: result.childInfo?.gender || result.gender || ''\n\t\t}\n\t\t\n\t\t// ✅ 优先使用云数据库返回的 stats 数据\n\t\tif (result.stats && result.stats.overall) {\n\t\t\tconsole.log('=== 使用云数据库统计数据 ===')\n\t\t\tthis.loadFromCloudData(result)\n\t\t} else {\n\t\t\t// 兜底：使用 formState 重新计算（旧数据格式）\n\t\t\tconsole.log('=== 使用 formState 计算统计数据 ===')\n\t\t\tthis.calculateSummary(result)\n\t\t}\n\t\t\n\t\t// TODO: 教师端还需要计算 notAchieved\n\t\t// this.notAchieved = this.calculateNotAchieved(result)\n\t},\n\t\n\t// 从云数据库数据加载（新增）\n\tloadFromCloudData(result) {\n\t\tconst stats = result.stats\n\t\t\n\t\tconsole.log('=== 云数据详情 ===')\n\t\tconsole.log('stats.overall:', stats.overall)\n\t\tconsole.log('stats.domains keys:', stats.domains ? Object.keys(stats.domains) : [])\n\t\tconsole.log('stats.subdomains keys:', stats.subdomains ? Object.keys(stats.subdomains).slice(0, 10) : [])\n\t\t\n\t\t// 计算总得分\n\t\tconst overallScore = result.scorePercent || Math.round((stats.overall?.ratio || 0) * 100)\n\t\tconsole.log('计算得分:', overallScore, '来源:', result.scorePercent ? 'scorePercent' : 'stats.overall.ratio')\n\t\t\n\t\t// 转换 domains 格式\n\t\tconst domains = {}\n\t\t\n\t\t// 处理 domains 统计\n\t\tif (stats.domains) {\n\t\t\tObject.keys(stats.domains).forEach(domainKey => {\n\t\t\t\tconst domainStats = stats.domains[domainKey]\n\t\t\t\tconsole.log(`领域 ${domainKey}:`, domainStats)\n\t\t\t\t\n\t\t\t\tdomains[domainKey] = {\n\t\t\t\t\tratio: domainStats.ratio || 0,\n\t\t\t\t\tsubdomains: {}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\t\n\t\t// 处理 subdomains 统计\n\t\tif (stats.subdomains) {\n\t\t\tObject.keys(stats.subdomains).forEach(subdomainKey => {\n\t\t\t\t// subdomainKey 格式: \"domain::subdomain\"\n\t\t\t\tconst parts = subdomainKey.split('::')\n\t\t\t\tif (parts.length !== 2) {\n\t\t\t\t\tconsole.warn('子领域 key 格式不正确:', subdomainKey)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst [domain, subdomain] = parts\n\t\t\t\tconst subdomainStats = stats.subdomains[subdomainKey]\n\t\t\t\t\n\t\t\t\t// 如果 domain 不存在，创建它\n\t\t\t\tif (!domains[domain]) {\n\t\t\t\t\tconsole.log(`创建缺失的领域: ${domain}`)\n\t\t\t\t\tdomains[domain] = {\n\t\t\t\t\t\tratio: 0,\n\t\t\t\t\t\tsubdomains: {}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdomains[domain].subdomains[subdomain] = {\n\t\t\t\t\tpassed: subdomainStats.passed,\n\t\t\t\t\ttotal: subdomainStats.total,\n\t\t\t\t\tratio: subdomainStats.ratio\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\t\n\t\tthis.summary = {\n\t\t\toverallScore,\n\t\t\tlevel: result.level || this.getLevelText(overallScore),\n\t\t\tdomains\n\t\t}\n\t\t\n\t\tconsole.log('=== 加载完成 ===')\n\t\tconsole.log('完成率:', overallScore + '%')\n\t\tconsole.log('等级:', this.summary.level)\n\t\tconsole.log('领域数量:', Object.keys(domains).length)\n\t\tconsole.log('领域列表:', Object.keys(domains))\n\t\t\n\t\t// 输出每个领域的子领域数量\n\t\tObject.keys(domains).forEach(domain => {\n\t\t\tconst subdomainCount = Object.keys(domains[domain].subdomains).length\n\t\t\tconsole.log(`  ${domain}: ${subdomainCount} 个子领域, 完成率: ${(domains[domain].ratio * 100).toFixed(1)}%`)\n\t\t})\n\t},\n\t\t\t\n\t\t// 计算汇总数据\n\t\tcalculateSummary(result) {\n\t\t\t// 从结果中获取数据\n\t\t\tconst answers = result.answers || {}\n\t\t\tconst formState = result.formState || {}\n\t\t\t\n\t\t\tconsole.log('=== 计算统计 ===')\n\t\t\tconsole.log('answers:', answers)\n\t\t\tconsole.log('formState keys:', Object.keys(formState))\n\t\t\t\n\t\t\tconst domains = {}\n\t\t\tlet totalPassed = 0\n\t\t\tlet totalQuestions = 0\n\t\t\t\n\t\t\t// 按领域统计（从 formState 或 answers 获取）\n\t\t\tObject.keys(formState).forEach(domain => {\n\t\t\t\tconst domainQuestions = formState[domain] || []\n\t\t\t\tconst domainPassed = domainQuestions.filter(q => q.checked === true || answers[q.id] === 1).length\n\t\t\t\tconst domainTotal = domainQuestions.length\n\t\t\t\tconst domainRatio = domainTotal > 0 ? domainPassed / domainTotal : 0\n\t\t\t\t\n\t\t\t\t// 按 subdomain 分组统计\n\t\t\t\tconst subdomains = {}\n\t\t\t\tdomainQuestions.forEach(question => {\n\t\t\t\t\tconst subdomain = question.subdomain || '未分类'\n\t\t\t\t\tif (!subdomains[subdomain]) {\n\t\t\t\t\t\tsubdomains[subdomain] = { total: 0, passed: 0 }\n\t\t\t\t\t}\n\t\t\t\t\tsubdomains[subdomain].total++\n\t\t\t\t\t// 检查是否通过\n\t\t\t\t\tif (question.checked === true || answers[question.id] === 1) {\n\t\t\t\t\t\tsubdomains[subdomain].passed++\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\t// 计算各子领域的比例\n\t\t\t\tObject.keys(subdomains).forEach(subdomain => {\n\t\t\t\t\tconst subStats = subdomains[subdomain]\n\t\t\t\t\tsubStats.ratio = subStats.total > 0 ? subStats.passed / subStats.total : 0\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tdomains[domain] = {\n\t\t\t\t\tratio: domainRatio,\n\t\t\t\t\tsubdomains\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttotalPassed += domainPassed\n\t\t\t\ttotalQuestions += domainTotal\n\t\t\t})\n\t\t\t\n\t\t\tconst overallScore = totalQuestions > 0 ? Math.round((totalPassed / totalQuestions) * 100) : 0\n\t\t\t\n\t\t\tthis.summary = {\n\t\t\t\toverallScore,\n\t\t\t\tlevel: this.getLevelText(overallScore),\n\t\t\t\tdomains\n\t\t\t}\n\t\t\t\n\t\t\tconsole.log('计算完成 - 完成率:', overallScore + '%')\n\t\t\tconsole.log('领域统计:', domains)\n\t\t},\n\t\t\t\n\t\t// 获取子领域中文标签\n\t\tgetSubdomainLabel(subdomain) {\n\t\t\treturn subdomainLabels[subdomain] || subdomain\n\t\t},\n\t\t\n\t\t// 获取柱状图颜色类\n\t\tgetBarColorClass(ratio) {\n\t\t\tif (ratio >= 0.8) return 'bar-excellent'     // 优秀（蓝）\n\t\t\tif (ratio >= 0.6) return 'bar-good'          // 良好（绿）\n\t\t\tif (ratio >= 0.4) return 'bar-fair'          // 普通（黄）\n\t\t\treturn 'bar-poor'                             // 需关注（橙）\n\t\t},\n\t\t\t\n\t\t\t// 获取等级文本\n\t\t\tgetLevelText(score) {\n\t\t\t\tif (score >= 90) return '优秀'\n\t\t\t\tif (score >= 75) return '良好'\n\t\t\t\tif (score >= 60) return '正常'\n\t\t\t\tif (score >= 40) return '需关注'\n\t\t\t\treturn '需干预'\n\t\t\t},\n\t\t\t\n\t\t// 跳转到个人中心\n\t\tgoToUserCenter() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/user-center/user-center'\n\t\t\t})\n\t\t},\n\t\t\t\n\t\t\t// 重新评估\n\t\t\tstartNew() {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '重新评估',\n\t\t\t\t\tcontent: '确定要开始新的评估吗？',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t// 清除评估数据\n\t\t\t\t\t\t\tuni.removeStorageSync('assessmentForm')\n\t\t\t\t\t\t\tuni.removeStorageSync('assessmentResult')\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 跳转到儿童信息页\n\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\turl: '/pages/child-info/child-info'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// TODO: 对接云函数 - 家长端\n\t\t\tloadFromCloudForParent(assessmentId) {\n\t\t\t\t// 示例代码\n\t\t\t\tuniCloud.callFunction({\n\t\t\t\t\tname: 'getAssessmentForParent',\n\t\t\t\t\tdata: { assessmentId }\n\t\t\t\t}).then(res => {\n\t\t\t\t\tthis.summary = res.result.data.stats\n\t\t\t\t\tthis.childInfo = res.result.data.childInfo\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// TODO: 对接云函数 - 教师端\n\t\t\tloadFromCloudForTeacher(assessmentId) {\n\t\t\t\t// 示例代码\n\t\t\t\tuniCloud.callFunction({\n\t\t\t\t\tname: 'getAssessmentForTeacher',\n\t\t\t\t\tdata: { assessmentId }\n\t\t\t\t}).then(res => {\n\t\t\t\t\tObject.assign(this, res.result.data)\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t.result-container {\n\t\tbackground: #f9fbfe;\n\t\tmin-height: 100vh;\n\t\tpadding: 20rpx;\n\t\tpadding-bottom: 150rpx;\n\t}\n\n\t/* ========== 1. Header 头部 ========== */\n\t.header {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tbackground: #fff;\n\t\tborder-radius: 20rpx;\n\t\tpadding: 30rpx;\n\t\tmargin-bottom: 30rpx;\n\t\tbox-shadow: 0 4rpx 8rpx rgba(0, 0, 0, 0.05);\n\t}\n\n\t.logo {\n\t\twidth: 160rpx;\n\t\theight: 160rpx;\n\t\tmargin-bottom: 20rpx;\n\t}\n\n\t.child-info {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tmargin-bottom: 20rpx;\n\t}\n\n\t.name {\n\t\tfont-size: 36rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #333;\n\t\tmargin-bottom: 10rpx;\n\t}\n\n\t.meta {\n\t\tfont-size: 26rpx;\n\t\tcolor: #888;\n\t}\n\n\t.score-box {\n\t\tbackground: #e9f5ff;\n\t\tborder-radius: 16rpx;\n\t\tpadding: 16rpx 40rpx;\n\t\ttext-align: center;\n\t\tmin-width: 200rpx;\n\t}\n\n\t.score {\n\t\tdisplay: block;\n\t\tfont-size: 60rpx;\n\t\tcolor: #007aff;\n\t\tfont-weight: 600;\n\t\tline-height: 1.2;\n\t}\n\n\t.level {\n\t\tdisplay: block;\n\t\tfont-size: 28rpx;\n\t\tcolor: #666;\n\t\tmargin-top: 5rpx;\n\t}\n\n\t/* ========== 2. Chart 柱状图 ========== */\n\t.chart-section {\n\t\tmargin-top: 20rpx;\n\t\tbackground: #fff;\n\t\tborder-radius: 20rpx;\n\t\tpadding: 30rpx;\n\t\tbox-shadow: 0 4rpx 8rpx rgba(0, 0, 0, 0.05);\n\t}\n\n\t.section-title {\n\t\tdisplay: block;\n\t\tfont-size: 32rpx;\n\t\tfont-weight: 600;\n\t\tcolor: #333;\n\t\tmargin-bottom: 30rpx;\n\t}\n\n\t.domain-overview {\n\t\tmargin-bottom: 40rpx;\n\t\tbackground: #f8f9fa;\n\t\tborder-radius: 15rpx;\n\t\tpadding: 20rpx;\n\t}\n\n\t.domain-overview:last-child {\n\t\tmargin-bottom: 0;\n\t}\n\n\t.domain-title {\n\t\tfont-size: 28rpx;\n\t\tfont-weight: 600;\n\t\tcolor: #333;\n\t\tmargin-bottom: 8rpx;\n\t\tdisplay: block;\n\t}\n\n\t.domain-score {\n\t\tfont-size: 24rpx;\n\t\tcolor: #007aff;\n\t\tfont-weight: 500;\n\t\tmargin-bottom: 20rpx;\n\t\tdisplay: block;\n\t}\n\n\t.chart {\n\t\twidth: 100%;\n\t}\n\n\t.chart-bars {\n\t\tdisplay: flex;\n\t\tjustify-content: space-around;\n\t\talign-items: flex-end;\n\t\theight: 400rpx;\n\t\tpadding: 0 10rpx;\n\t}\n\n\t.chart-bar {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tflex: 1;\n\t\tmargin: 0 5rpx;\n\t}\n\n\t.bar-container {\n\t\twidth: 100%;\n\t\theight: 280rpx;\n\t\tbackground: #f0f0f0;\n\t\tborder-radius: 10rpx;\n\t\tposition: relative;\n\t\tmargin-bottom: 15rpx;\n\t\toverflow: hidden;\n\t}\n\n\t.bar-fill {\n\t\tposition: absolute;\n\t\tbottom: 0;\n\t\tleft: 50%;\n\t\ttransform: translateX(-50%);\n\t\twidth: 90%;\n\t\tmin-height: 20rpx;\n\t\tborder-radius: 10rpx 10rpx 0 0;\n\t\ttransition: height 0.5s ease;\n\t}\n\n\t.bar-excellent {\n\t\tbackground: linear-gradient(180deg, #007aff 0%, #4da3ff 100%);\n\t}\n\n\t.bar-good {\n\t\tbackground: linear-gradient(180deg, #28a745 0%, #5dd875 100%);\n\t}\n\n\t.bar-fair {\n\t\tbackground: linear-gradient(180deg, #ffc107 0%, #ffeb3b 100%);\n\t}\n\n\t.bar-poor {\n\t\tbackground: linear-gradient(180deg, #ff9800 0%, #ffb74d 100%);\n\t}\n\n\t.bar-label {\n\t\tfont-size: 22rpx;\n\t\tcolor: #666;\n\t\tmargin-top: 10rpx;\n\t\tword-break: keep-all;\n\t\ttext-align: center;\n\t}\n\n\t.bar-value {\n\t\tfont-size: 22rpx;\n\t\tcolor: #007aff;\n\t\tfont-weight: 500;\n\t\tmargin-top: 5rpx;\n\t}\n\n\t.bar-count {\n\t\tfont-size: 18rpx;\n\t\tcolor: #999;\n\t\tmargin-top: 3rpx;\n\t}\n\n\t/* ========== 3. Table 未达标明细 ========== */\n\t.table-section {\n\t\tmargin-top: 20rpx;\n\t\tbackground: #fff;\n\t\tborder-radius: 20rpx;\n\t\tpadding: 20rpx 30rpx;\n\t\tbox-shadow: 0 4rpx 8rpx rgba(0, 0, 0, 0.05);\n\t}\n\n\t.table-header {\n\t\tdisplay: flex;\n\t\tpadding: 15rpx 0;\n\t\tborder-bottom: 2rpx solid #e5e5e5;\n\t\tmargin-bottom: 15rpx;\n\t}\n\n\t.table-header .col-domain,\n\t.table-header .col-title,\n\t.table-header .col-age {\n\t\tfont-weight: 600;\n\t\tfont-size: 26rpx;\n\t\tcolor: #333;\n\t}\n\n\t.table-row {\n\t\tdisplay: flex;\n\t\tpadding: 15rpx 0;\n\t\tborder-bottom: 1rpx solid #eee;\n\t}\n\n\t.table-row:last-child {\n\t\tborder-bottom: none;\n\t}\n\n\t.col-domain {\n\t\twidth: 120rpx;\n\t\tfont-size: 24rpx;\n\t\tcolor: #007aff;\n\t\tfont-weight: 500;\n\t}\n\n\t.col-title {\n\t\tflex: 1;\n\t\tmargin: 0 20rpx;\n\t\tfont-size: 24rpx;\n\t\tcolor: #333;\n\t\tline-height: 1.4;\n\t}\n\n\t.col-age {\n\t\twidth: 120rpx;\n\t\tfont-size: 24rpx;\n\t\tcolor: #999;\n\t\ttext-align: right;\n\t}\n\n\t.empty-state {\n\t\ttext-align: center;\n\t\tpadding: 60rpx 0;\n\t}\n\n\t.empty-text {\n\t\tfont-size: 26rpx;\n\t\tcolor: #999;\n\t}\n\n\t/* ========== 4. Footer Buttons 按钮 ========== */\n\t.footer-buttons {\n\t\tposition: fixed;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tpadding: 30rpx;\n\t\tbackground: #fff;\n\t\tborder-top: 1rpx solid #eee;\n\t\tdisplay: flex;\n\t\tgap: 20rpx;\n\t\tbox-shadow: 0 -4rpx 10rpx rgba(0, 0, 0, 0.05);\n\t}\n\n\t.btn {\n\t\tflex: 1;\n\t\theight: 80rpx;\n\t\tborder-radius: 40rpx;\n\t\tborder: none;\n\t\tfont-size: 28rpx;\n\t\tfont-weight: 600;\n\t}\n\n\t.btn.secondary {\n\t\tbackground: #e5e5e5;\n\t\tcolor: #333;\n\t}\n\n\t.btn.primary {\n\t\tbackground: #007aff;\n\t\tcolor: #fff;\n\t}\n</style>","import mod from \"-!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./result.vue?vue&type=style&index=0&id=8b0659b4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./result.vue?vue&type=style&index=0&id=8b0659b4&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1762773259577\n      var cssReload = require(\"C:/Users/86182/Downloads/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}